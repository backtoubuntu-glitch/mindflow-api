<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Educational Chess | MindFlow AI</title>
    <meta name="description" content="Learn chess with AI-powered educational features. Improve your strategic thinking and problem-solving skills.">
    <link rel="stylesheet" href="/assets/css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chessboard-js/1.0.0/chessboard-1.0.0.min.css">
    <style>
        .chess-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 2rem;
        }

        .chess-board-container {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
            text-align: center;
        }

        #chessBoard {
            margin: 0 auto;
        }

        .chess-controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
            flex-wrap: wrap;
        }

        .chess-sidebar {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .game-info {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
        }

        .educational-tips {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
        }

        .tip-content {
            background: #f0f9ff;
            border: 1px solid #bae6fd;
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
        }

        .move-history {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
            max-height: 300px;
            overflow-y: auto;
        }

        .move-list {
            list-style: none;
            margin-top: 1rem;
        }

        .move-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid #f3f4f6;
        }

        .move-item:last-child {
            border-bottom: none;
        }

        .game-status {
            font-size: 1.125rem;
            font-weight: 600;
            color: #374151;
            margin: 1rem 0;
            padding: 1rem;
            background: #f8fafc;
            border-radius: 8px;
            text-align: center;
        }

        .educational-feature {
            background: #ecfdf5;
            border: 1px solid #a7f3d0;
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
        }

        .analysis-section {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
        }

        .analysis-result {
            background: #fffbeb;
            border: 1px solid #fcd34d;
            border-radius: 8px;
            padding: 1rem;
            margin-top: 1rem;
            font-size: 0.875rem;
        }

        @media (max-width: 1024px) {
            .chess-container {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .chess-container {
                padding: 1rem;
            }

            .chess-controls {
                flex-direction: column;
                align-items: center;
            }

            .chess-controls .btn {
                width: 100%;
                max-width: 200px;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation Header -->
    <header class="main-header">
        <nav class="navbar">
            <div class="nav-brand">
                <a href="/index.html" class="logo-link">
                    <div class="logo" style="width: 40px; height: 40px; background: #2563eb; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">MF</div>
                    <span class="brand-text">MindFlow AI</span>
                </a>
            </div>
            
            <div class="nav-links">
                <a href="/index.html" class="nav-link">Home</a>
                <a href="/dashboard.html" class="nav-link">Dashboard</a>
                <a href="/khensani-platform.html" class="nav-link">Khensani AI</a>
                <a href="/chess.html" class="nav-link active">Educational Chess</a>
                <a href="/safety.html" class="nav-link">Safety</a>
                <a href="/login.html" class="nav-link" id="loginBtn">Login</a>
                <a href="#" class="nav-link" id="logoutBtn" style="display: none;">Logout</a>
            </div>
            
            <div class="nav-actions">
                <button id="voiceToggle" class="voice-btn">ðŸŽ¤ Voice</button>
                <span id="userWelcome" class="user-welcome" style="display: none;"></span>
            </div>
        </nav>
    </header>

    <!-- Chess Game Interface -->
    <div class="chess-container">
        <!-- Main Chess Board -->
        <div class="chess-board-container">
            <h2>Educational Chess</h2>
            <p style="color: #6b7280; margin-bottom: 2rem;">Learn strategy, improve critical thinking, and have fun!</p>
            
            <div id="chessBoard" style="width: 400px;"></div>
            
            <div class="game-status" id="gameStatus">
                Your turn! Make a move.
            </div>

            <div class="chess-controls">
                <button class="btn btn-primary" onclick="window.newChessGame()">New Game</button>
                <button class="btn btn-secondary" onclick="window.undoChessMove()">Undo Move</button>
                <button class="btn btn-secondary" onclick="window.analyzeChessGame()">Analyze</button>
                <button class="btn btn-secondary" onclick="showHint()">Get Hint</button>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="chess-sidebar">
            <!-- Game Information -->
            <div class="game-info">
                <h3>Game Information</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 1rem;">
                    <div style="text-align: center;">
                        <div style="font-size: 0.875rem; color: #6b7280;">Player</div>
                        <div style="font-weight: 600; color: #374151;">You (White)</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 0.875ssrem; color: #6b7280;">Opponent</div>
                        <div style="font-weight: 600; color: #374151;">Khensani AI (Black)</div>
                    </div>
                </div>
                <div class="educational-feature">
                    <strong>Learning Focus:</strong> Piece Development
                    <br>
                    <small style="color: #6b7280;">Control the center and develop your pieces efficiently.</small>
                </div>
            </div>

            <!-- Educational Tips -->
            <div class="educational-tips">
                <h3>Chess Tips</h3>
                <div class="tip-content" id="chessTip">
                    <strong>ðŸ’¡ Pro Tip:</strong> Control the center squares (d4, d5, e4, e5) to gain more space and better piece mobility.
                </div>
                <button class="btn btn-secondary btn-sm" onclick="nextTip()" style="margin-top: 1rem; width: 100%;">
                    Next Tip
                </button>
            </div>

            <!-- Move History -->
            <div class="move-history">
                <h3>Move History</h3>
                <div class="move-list" id="moveHistory">
                    <div class="move-item">
                        <span>1.</span>
                        <span>e4</span>
                        <span>e5</span>
                    </div>
                    <div class="move-item">
                        <span>2.</span>
                        <span>Nf3</span>
                        <span>Nc6</span>
                    </div>
                </div>
            </div>

            <!-- Game Analysis -->
            <div class="analysis-section">
                <h3>Game Analysis</h3>
                <button class="btn btn-primary btn-sm" onclick="analyzePosition()" style="width: 100%; margin-bottom: 1rem;">
                    Analyze Current Position
                </button>
                <div class="analysis-result" id="analysisResult" style="display: none;">
                    Analysis will appear here...
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="main-footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>MindFlow AI</h3>
                <p>Making quality AI-powered education accessible to every African child.</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 MindTech Industries. All rights reserved.</p>
        </div>
    </footer>

    <!-- Chess Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chessboard-js/1.0.0/chessboard-1.0.0.min.js"></script>

    <!-- Scripts -->
    <script src="/assets/js/encoding-fix.js"></script>
    <script src="/assets/js/main.js"></script>
    <script src="/assets/js/auth.js"></script>
    <script src="/assets/js/chess-engine.js"></script>
    <script src="/assets/js/voice.js"></script>

    <script>
        // Chess tips database
        const chessTips = [
            "Control the center squares (d4, d5, e4, e5) to gain more space and better piece mobility.",
            "Develop your knights and bishops before moving the same piece multiple times in the opening.",
            "Castle early to protect your king and connect your rooks.",
            "Don't move the same piece multiple times in the opening unless necessary.",
            "Try to create pawn chains to control important squares.",
            "Look for forks, pins, and skewers to win material.",
            "Keep your pieces protected and avoid leaving them undefended.",
            "Think about your opponent's threats before making your move.",
            "Use your rooks on open files for maximum effectiveness.",
            "In the endgame, activate your king as it becomes a strong piece."
        ];

        let currentTipIndex = 0;

        function nextTip() {
            currentTipIndex = (currentTipIndex + 1) % chessTips.length;
            document.getElementById('chessTip').innerHTML = 
                `<strong>ðŸ’¡ Pro Tip:</strong> ${chessTips[currentTipIndex]}`;
        }

        function showHint() {
            const hints = [
                "Consider developing your light-squared bishop.",
                "Look for opportunities to control the center.",
                "Think about castling to secure your king.",
                "Check if any of your pieces are under attack.",
                "Consider your pawn structure and potential breaks."
            ];
            const randomHint = hints[Math.floor(Math.random() * hints.length)];
            alert(`ðŸ’¡ Hint: ${randomHint}`);
        }

        function analyzePosition() {
            const analysisResult = document.getElementById('analysisResult');
            analysisResult.style.display = 'block';
            analysisResult.innerHTML = `
                <strong>Position Analysis:</strong><br>
                â€¢ Material Balance: Equal<br>
                â€¢ Center Control: You have slight advantage<br>
                â€¢ Piece Activity: Good development<br>
                â€¢ King Safety: Both kings are safe<br>
                <br>
                <strong>Recommendation:</strong> Continue developing pieces and control the center.
            `;
        }

        // Initialize chess when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // The chess-engine.js will handle initialization
            console.log('Chess page loaded - engine will initialize');
        });

        // Check authentication for game saving
        if (!window.isUserLoggedIn || !window.isUserLoggedIn()) {
            console.log('User not logged in - game progress will not be saved');
        }
    </script>
</body>
</html>